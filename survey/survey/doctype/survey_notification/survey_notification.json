{
    "actions": [],
    "allow_rename": 1,
    "autoname": "Prompt",
    "creation": "2024-05-20 10:00:00.000000",
    "doctype": "DocType",
    "engine": "InnoDB",
    "field_order": [
        "enabled",
        "is_standard",
        "module",
        "column_break_2",
        "channel",
        "survey_form",
        "filters",
        "subject",
        "document_type",
        "col_break_1",
        "event",
        "method",
        "date_changed",
        "days_in_advance",
        "value_changed",
        "sender",
        "sender_email",
        "section_break_9",
        "condition",
        "column_break_6",
        "property_section",
        "set_property_after_alert",
        "property_value",
        "column_break_5",
        "send_to_all_assignees",
        "recipients",
        "message_sb",
        "message_type",
        "message",
        "column_break_25",
        "attach_print",
        "print_format",
        "column_break_llcs",
        "attach_files",
        "from_attach_field"
    ],
    "fields": [
        {
            "default": "1",
            "fieldname": "enabled",
            "fieldtype": "Check",
            "label": "Enabled"
        },
        {
            "default": "0",
            "fieldname": "is_standard",
            "fieldtype": "Check",
            "label": "Is Standard"
        },
        {
            "fieldname": "module",
            "fieldtype": "Link",
            "label": "Module",
            "options": "Module Def"
        },
        {
            "fieldname": "column_break_2",
            "fieldtype": "Column Break"
        },
        {
            "default": "Email",
            "fieldname": "channel",
            "fieldtype": "Select",
            "label": "Channel",
            "options": "Email\nSlack\nSystem Notification\nSMS",
            "reqd": 1
        },
        {
            "fieldname": "survey_form",
            "fieldtype": "Link",
            "label": "Survey Form",
            "options": "Survey Form",
            "reqd": 1
        },
        {
            "fieldname": "filters",
            "fieldtype": "Section Break",
            "label": "Filters"
        },
        {
            "description": "To add dynamic subject, use jinja tags like: {{ doc.name }} Survey",
            "fieldname": "subject",
            "fieldtype": "Data",
            "label": "Subject",
            "reqd": 1
        },
        {
            "fieldname": "document_type",
            "fieldtype": "Link",
            "label": "Document Type",
            "options": "DocType",
            "reqd": 1
        },
        {
            "fieldname": "col_break_1",
            "fieldtype": "Column Break"
        },
        {
            "fieldname": "event",
            "fieldtype": "Select",
            "label": "Send Alert On",
            "options": "\nNew\nSave\nSubmit\nCancel\nDays After\nDays Before\nValue Change\nMethod\nCustom",
            "reqd": 1
        },
        {
            "depends_on": "eval:doc.event=='Method'",
            "fieldname": "method",
            "fieldtype": "Data",
            "label": "Trigger Method"
        },
        {
            "depends_on": "eval:doc.document_type && (doc.event==\"Days After\" || doc.event==\"Days Before\")",
            "fieldname": "date_changed",
            "fieldtype": "Select",
            "label": "Reference Date"
        },
        {
            "default": "0",
            "depends_on": "eval:doc.document_type && (doc.event==\"Days After\" || doc.event==\"Days Before\")",
            "fieldname": "days_in_advance",
            "fieldtype": "Int",
            "label": "Days Before or After"
        },
        {
            "depends_on": "eval:doc.document_type && doc.event==\"Value Change\"",
            "fieldname": "value_changed",
            "fieldtype": "Select",
            "label": "Value Changed"
        },
        {
            "depends_on": "eval: doc.channel == 'Email'",
            "fieldname": "sender",
            "fieldtype": "Link",
            "label": "Sender",
            "options": "Email Account"
        },
        {
            "fieldname": "sender_email",
            "fieldtype": "Data",
            "label": "Sender Email",
            "read_only": 1
        },
        {
            "fieldname": "section_break_9",
            "fieldtype": "Section Break"
        },
        {
            "description": "Optional: The alert will be sent if this expression is true",
            "fieldname": "condition",
            "fieldtype": "Code",
            "label": "Condition"
        },
        {
            "fieldname": "column_break_6",
            "fieldtype": "Column Break"
        },
        {
            "collapsible": 1,
            "fieldname": "property_section",
            "fieldtype": "Section Break",
            "label": "Set Property After Alert"
        },
        {
            "fieldname": "set_property_after_alert",
            "fieldtype": "Select",
            "label": "Set Property After Alert"
        },
        {
            "fieldname": "property_value",
            "fieldtype": "Data",
            "label": "Value To Be Set"
        },
        {
            "fieldname": "column_break_5",
            "fieldtype": "Section Break",
            "label": "Recipients"
        },
        {
            "default": "0",
            "fieldname": "send_to_all_assignees",
            "fieldtype": "Check",
            "label": "Send To All Assignees"
        },
        {
            "fieldname": "recipients",
            "fieldtype": "Table",
            "label": "Recipients",
            "options": "Survey Notification Recipient",
            "reqd": 1
        },
        {
            "fieldname": "message_sb",
            "fieldtype": "Section Break",
            "label": "Message"
        },
        {
            "default": "Markdown",
            "fieldname": "message_type",
            "fieldtype": "Select",
            "label": "Message Type",
            "options": "Markdown\nHTML\nPlain Text"
        },
        {
            "description": "Dynamic Link: {{ site_url }}/survey/run/{{ survey_form }}?reference_doctype={{ doc.doctype }}&reference_docname={{ doc.name }}",
            "fieldname": "message",
            "fieldtype": "Code",
            "label": "Message",
            "options": "Jinja",
            "reqd": 1
        },
        {
            "collapsible": 1,
            "fieldname": "column_break_25",
            "fieldtype": "Section Break",
            "label": "Attachment Settings"
        },
        {
            "default": "0",
            "fieldname": "attach_print",
            "fieldtype": "Check",
            "label": "Attach Print"
        },
        {
            "depends_on": "attach_print",
            "fieldname": "print_format",
            "fieldtype": "Link",
            "label": "Print Format",
            "options": "Print Format"
        },
        {
            "fieldname": "column_break_llcs",
            "fieldtype": "Column Break"
        },
        {
            "fieldname": "attach_files",
            "fieldtype": "Select",
            "label": "Attach Files",
            "options": "\nFrom Field\nAll"
        },
        {
            "depends_on": "eval:doc.attach_files === \"From Field\"",
            "fieldname": "from_attach_field",
            "fieldtype": "Select",
            "label": "From Attach Field"
        }
    ],
    "icon": "fa fa-envelope",
    "index_web_pages_for_search": 1,
    "links": [],
    "modified": "2024-05-20 10:00:00.000000",
    "modified_by": "Administrator",
    "module": "Survey",
    "name": "Survey Notification",
    "owner": "Administrator",
    "permissions": [
        {
            "create": 1,
            "delete": 1,
            "email": 1,
            "export": 1,
            "print": 1,
            "read": 1,
            "report": 1,
            "role": "System Manager",
            "share": 1,
            "write": 1
        }
    ],
    "sort_field": "modified",
    "sort_order": "DESC",
    "states": [],
    "title_field": "subject",
    "track_changes": 1
}